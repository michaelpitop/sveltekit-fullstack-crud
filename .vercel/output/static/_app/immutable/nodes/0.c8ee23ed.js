import{s as p,c as g,u as b,g as v,d as w,o as $}from"../chunks/scheduler.8b5db029.js";import{S,i as y,g as D,h as C,j as R,f,k as j,a as A,d as M,t as T}from"../chunks/index.ae027891.js";import{a as U,d as _,b as h,g as k,s as q,c as E}from"../chunks/store.e2207534.js";function F(i){let s,o;const l=i[1].default,e=g(l,i,i[0],null);return{c(){s=D("div"),e&&e.c(),this.h()},l(t){s=C(t,"DIV",{class:!0});var a=R(s);e&&e.l(a),a.forEach(f),this.h()},h(){j(s,"class","mainContainer svelte-18j2ba9")},m(t,a){A(t,s,a),e&&e.m(s,null),o=!0},p(t,[a]){e&&e.p&&(!o||a&1)&&b(e,l,t,t[0],o?w(l,t[0],a,null):v(t[0]),null)},i(t){o||(M(e,t),o=!0)},o(t){T(e,t),o=!1},d(t){t&&f(s),e&&e.d(t)}}}function I(i,s,o){let{$$slots:l={},$$scope:e}=s;const t=["/","product"];return $(()=>(console.log("Mounting"),U.onAuthStateChanged(async n=>{const u=window.location.pathname;if(!n&&!t.includes(u)){window.location.href="/";return}if(n&&u==="/"){window.location.href="/dashboard";return}if(!n)return;let r;const m=_(h,"users",n.uid),d=await k(m);if(d.exists())console.log("Fetching User"),r=d.data();else{console.log("Creating User");const c=_(h,"users",n.uid);r={email:n.email,todos:[]},await q(c,r,{merge:!0})}E.update(c=>({...c,user:n,data:r,loading:!1}))}))),i.$$set=a=>{"$$scope"in a&&o(0,e=a.$$scope)},[e,l]}class z extends S{constructor(s){super(),y(this,s,I,F,p,{})}}export{z as component};
