import{s as D,e as C,o as p,d as R,u as L,g as j,f as k}from"../chunks/scheduler.6b255819.js";import{S as q,i as A,d as S,v as E,j as F,k as I,l as M,g,m as O,a as P,f as T,t as U}from"../chunks/index.23d71ce1.js";import{a as v,d,b as f,g as w,s as b,c as y,e as B}from"../chunks/store.863a048f.js";const{console:N}=B,V="src/routes/+layout.svelte";function _(n){let o,i;const l=n[1].default,e=C(l,n,n[0],null),c={c:function(){o=F("div"),e&&e.c(),this.h()},l:function(t){o=I(t,"DIV",{class:!0});var a=M(o);e&&e.l(a),a.forEach(g),this.h()},h:function(){O(o,"class","mainContainer s-7IPF32Wcq3s8"),R(o,V,58,0,1746)},m:function(t,a){P(t,o,a),e&&e.m(o,null),i=!0},p:function(t,[a]){e&&e.p&&(!i||a&1)&&L(e,l,t,t[0],i?k(l,t[0],a,null):j(t[0]),null)},i:function(t){i||(T(e,t),i=!0)},o:function(t){U(e,t),i=!1},d:function(t){t&&g(o),e&&e.d(t)}};return S("SvelteRegisterBlock",{block:c,id:_.name,type:"component",source:"",ctx:n}),c}function W(n,o,i){let{$$slots:l={},$$scope:e}=o;E("Layout",l,["default"]);const c=["/","product"];p(()=>(console.log("Mounting"),v.onAuthStateChanged(async a=>{const m=window.location.pathname;if(!a&&!c.includes(m)){window.location.href="/";return}if(a&&m==="/"){window.location.href="/dashboard";return}if(!a)return;let r;const $=d(f,"users",a.uid),h=await w($);if(h.exists())console.log("Fetching User"),r=h.data();else{console.log("Creating User");const u=d(f,"users",a.uid);r={email:a.email,todos:[]},await b(u,r,{merge:!0})}y.update(u=>({...u,user:a,data:r,loading:!1}))})));const s=[];return Object.keys(o).forEach(t=>{!~s.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&N.warn(`<Layout> was created with unknown prop '${t}'`)}),n.$$set=t=>{"$$scope"in t&&i(0,e=t.$$scope)},n.$capture_state=()=>({onMount:p,auth:v,db:f,getDoc:w,doc:d,setDoc:b,authStore:y,nonAuthRoutes:c}),[e,l]}class J extends q{constructor(o){super(o),A(this,o,W,_,D,{}),S("SvelteRegisterComponent",{component:this,tagName:"Layout",options:o,id:_.name})}}export{J as component};
